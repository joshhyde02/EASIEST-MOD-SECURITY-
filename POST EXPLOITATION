PIVOTING AND REDIRECTION
    - During the lesson we will review the following topics
    - Control Sockets
    - Enumeration
    - exfiltration
SSH OVERVIEW
    - we know this
    - ssh USER@<PIVOT IP> -R <REMOTE PORT ON PIVOT>:TARGETHOST:TARGETPORT
    - ssh USER@<PIVOT_IP> -L <USER PORT ON LOCAL>:TARGETHOST:TARGETPORT
    
WINDOWS TARGETS 
    - PORT PROXY 
    - netsh interface portproxy add v4tov4 listenport=<LocalPort> listenaddress=<LocalIP> connectport=<TargetPort> connectaddress=<TargetIP> protocol=tcp
    - netsh interface portproxy show all
    - netsh interface portproxy delete v4tov4 listenport=<LocalPort>
    - netsh interface portproxy reset
CONTROL SOCKETS
    - benefits provided include
    - multiplexing 
    - data exfiltration
    - less loggin
CONTROL SOCKETS CONFIG 
    - ssh -M -S /tmp/s root@<IP ADDRESS> <TUNNEL COMMANDS -R or -L>
            - -M is master -S is slave 
            - o 'ControlPath=/tmp/s' 
            - -M -S /tmp/s
    - config file method
    - /ssh_config
    - Hostname machien1.example.org
    - ControlPath ~/.ssh/controlmasters/%r@%h:%p
    - ControlMaster auto
    - ControlPersist 10m
    - ControlPath ~/.ssh/cm/%r@%h:%p
    - %r is remote user
    - %h is remote host
    - %p is remote port
    ssh -o ControlPath='~/.ssh/cm/student@localhost:1111'
    - accesses sockets
    SCOKET THING
     1 Host grey
  2     HostName 10.50.36.193
  3     User student
  4     PasswordAuthentication no
  5     ControlPath ~/.ssh/cm/grey
  6     ControlMaster auto
  7     ControlPersist 30m
  8 Host *
  9     ControlPath ~/.ssh/cm/%r@%h:%p
 10     ControlMaster auto
 11     ControlPersist 30m
 12 
SOCKET THING 
HOST ENUMERATION
      - Windows
          - net user - user info 
          - tasklist /v -- running process verbose
          - tasklist /svc -- services ig 
          - ipconfig /all -- ip configurations including interfaces 
              - ip a is better
      - Linux
          - cat /etc/password - gives user info
          - ps -elf -- running processes 
                - htop or top is prolly better tbf but u can grep this
          - chkconfig -- checks config dumbass jit
          - ifconfig -a -- ip subnets shi like that
              - ip a is better
              - arp tables is being replaced - ip neighbors, arp
     - remember base64 and rot13 
     - root or zeus 
     - net localgroup "Power Users" /add me
     - net localgroup "Administrators" /add me
     - net localgroup " Remote Desktop Users" /add me
      - RKHUNTER, AND KASPERSKY ARE SECURITY 


135/tcp   open  msrpc
139/tcp   open  netbios-ssn
445/tcp   open  microsoft-ds
3389/tcp  open  ms-wbt-server
5040/tcp  open  unknown
5985/tcp  open  wsman
5986/tcp  open  wsmans
47001/tcp open  winrm
49664/tcp open  unknown
49665/tcp open  unknown
49666/tcp open  unknown
49668/tcp open  unknown
49669/tcp open  unknown
49670/tcp open  unknown
49671/tcp open  unknown
49676/tcp open  unknown
10.50.38.63

/etc/default/rkhunter
/etc/rkhunter.conf
/etc/cron.weekly/rkhunter
/etc/apt/apt.conf.d/90rkhunter
/etc/cron.daily/rkhunter
/etc/logrotate.d/rkhunter
/etc/logcheck/ignore.d.server/rkhunter
/var/cache/apt/archives/rkhunter_1.4.6-2~ubuntu18.04.1_all.deb
/var/log/rkhunter.log.1
/var/log/rkhunter.log
/var/lib/dpkg/triggers/rkhunter-propupd
/var/lib/dpkg/info/rkhunter.md5sums
/var/lib/dpkg/info/rkhunter.triggers
/var/lib/dpkg/info/rkhunter.conffiles
/var/lib/dpkg/info/rkhunter.postinst
/var/lib/dpkg/info/rkhunter.list
/var/lib/dpkg/info/rkhunter.config
/var/lib/dpkg/info/rkhunter.postrm
/var/lib/dpkg/info/rkhunter.templates
/var/lib/ucf/cache/:etc:default:rkhunter
/var/lib/rkhunter
/var/lib/rkhunter/db/rkhunter_prop_list.dat
/var/lib/rkhunter/db/rkhunter.dat
/usr/share/doc/rkhunter
/usr/share/rkhunter
/usr/share/man/man8/rkhunter.8.gz
/usr/bin/rkhunter


